{% load static %}
<!DOCTYPE html>
<html lang = "pt-br">
<head>
    <meta charset = "UTF-8">
    <meta name = "viewport" content = "width=device-width, initial-scale=1.0">
    <link rel = "stylesheet" href = "{% static 'financr/css_da_home_do_webapp/estilo.css' %}">

    <!-- Open Sans -->
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@300&display=swap" rel="stylesheet">

    <!-- Roboto Muito Fino -->
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@100&display=swap" rel="stylesheet"> 

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

    <title>Início</title>
</head>
<body>

    <div class="global">

        <div class="formatacao_cabecalho">
            <div class = "cabecalho">

                <div class="div_nome_app">

                    <h4 id = 'nome_do_app' style = "color: black; margin-top: 14vh;">- Financr -</h4>

                </div>

                <div class="div_usuario">

                    <img src = "{% static 'financr/img/imagens_para_home_do_webapp/Hamburger_icon.png' %}" alt = "ícone de Usuario" id = 'icone_usuario'>

                </div>

                
            </div>
        </div>

        <div class = "opcoes_icone_usuario">

            <nav style = 'list-style: none;' id = 'nav_opcoes_icone_usuario'>

                <img src = 'https://img.pngio.com/index-of-v2-imgs-x-png-black-and-white-256_256.png' id = 'fechar_config'>
                <li id = 'dados'> Usuario </li>
                <a style="text-decoration:none;" id = 'sair' href="{% url 'logout' %}"> Sair </a>


            </nav>

        </div>

        <div class = "conf_usuario">

            <h4> - Olá, {{ user.username|default:'Guest' }} - </h4>
            <h4> - Seu Email: - <br> {{ user.email|default:'E-mail não informado' }}  </h4>

        </div>

        <!-- Telas Maiores  -->

        <div class = "telas_e_expansao">


            <div class="tela_saldo">

                <div id = "fundo"></div>
                <img src = "{% static 'financr\img\imagens_para_home_do_webapp\saldo.png' %}" alt = "Uma seta girando ao redor de um símbolo de dinheiro específico para a moeda do real" id = 'img_saldo'>
                <!-- <div class="div_titulo">
                <h4 id = 'txt_saldo'>SALDO</h4>
                </div> -->
                <div class="div_formatacao_dados">
                    <div id="saldos">
                        <ul>
                            <p>Saldos</p>
                            <select name = "" id = "select-saldo">
                            {% for banco in contas %}
                                <option value="">{{ banco.nome_banco }} - R${{ banco.saldo}}</option>
                            {% endfor %}
                        </select>
                        </ul>
                    </div>
                    <div id="bancos">
                        <ul>
                            <p>Suas Contas</p>
                            <select name="" id = "select-banco">
                            {% for banco in contas %}
                                <option value=""> {{ banco.nome_banco }} </option>
                            {% endfor %}
                        </select>
                        </ul>
                    </div>
                    <div id="ultimas_receitas">
                        <ul>
                            <p>Últimas Receitas:</p>
                            <select name="" id="select-ultimas_receitas">

                                {% for receita in ultimas_receitas %}
                                <option>DATA: {{ receita.data_transacao }} - R${{ receita.valor }}</option>
                                {% endfor %}

                            </select>
                        </ul>
                    </div>
                    <div id="ultimas_despesas">
                        <ul>
                            <p>Últimas Despesas:</p>
                            <select name="" id = "select-ultimas_despesas">
                                {% for despesas in ultimas_despesas %}
                                <option>DATA: {{ despesas.data_transacao }} - R${{ despesas.valor }}</option>
                                {% endfor %}
                            </select>
                        </ul>
                    </div>
                    <div id = 'div_categoria_receita'>
                        <p>Categorias de receita</p>

                        <select name="" id = "select-categorias_receitas">
                            {% for i in categorias_receitas %}
                            <option>{{ i.categoria }}</option>
                        {% endfor %}
                        </select>
                    </div>
                    <div id = 'div_categoria_despesa'>
                        <p>Categorias de despesa</p>
                        <select name="" id = "select-categorias_despesa">

                            {% for i in categorias_despesas %}
                            <option>{{ i.categoria }}</option>
                        {% endfor %}

                        </select>
                    </div>
                    <div id = 'div_historico_receita'>
                        <p>Histórico De Receitas</p>
                        <select name="" id = "select-historico_receita">
                            {% for i in lista_transacoes_receitas %}
                            <option>descrição: {{ i.descricao }} - valor: {{ i.valor }} data {{ i.data_transacao }}</option>
                        {% endfor %}
                        </select>
                    </div>
                    <div id = 'div_historico_despesa'>
                        <p>Histórico De Despesas</p>
                        <select name="" id = "select-historico_despesa">
                            {% for i in lista_transacoes_despesas %}
                            <option>descrição: {{ i.descricao }} - valor: {{ i.valor }} data {{ i.data_transacao }}</option>
                        {% endfor %}
                        </select>
                    </div>
                    <div id = 'div_historico_transferencia'>

                            <p>Histórico De Transferências</p>
                        <select name="" id = "select-historico_transferencia">            
                            {% for i in lista_transacoes_transferencias %}
                                <option>descrição: {{ i.descricao }} - valor: {{ i.valor }} data {{ i.data_transacao }}</option>
                            {% endfor %}
                        </select>
                    </div>
                </div>
                <div class="div_sair">
                    <h4 id = 'txt_fechar'>
                        Fechar
                    </h4>
                </div>

            </div>
            <div class = "tela_graficos">

                <div id = "fundo"></div>
                <img src="{% static 'financr\img\imagens_para_home_do_webapp\grafico.png' %}" alt="Ícone de um gráfico onde tem uma seta subindo por cima de várias colunas de diversos tamanhos" id = 'img_grafico'>
                
                
                <div class="div_formatacao_grafico">

                    <div class="div_titulo_grafico">
                        <h4 id = 'txt_pizza'>

                            Gráfico Saldos

                        </h4>
                        <h4 id = txt_despesa>

                            Gráfico Últimas Despesas

                        </h4>
                        <h4 id = 'txt_receita'>

                            Gráfico Últimas Receitas
                            
                        </h4>
                    </div>
                    
                    <div id="graficopizza">


                    </div>

                    <div id="graficodespesas">

                        

                    </div>

                    <div id="graficoreceitas">


                    </div>

                    <div class="div_imgs_circulos">

                        <img src="{% static 'financr\img\imagens_para_home_do_webapp\circulo.png' %}" alt="" id = 'circulo_1'>
                        <img src="{% static 'financr\img\imagens_para_home_do_webapp\circulo.png' %}" alt="" id = 'circulo_2'>
                        <img src="{% static 'financr\img\imagens_para_home_do_webapp\circulo.png' %}" alt="" id = 'circulo_3'>

                    </div>

                    <div class="div_sair2">
                        <h4 id = 'txt_fechar2'>
                            Fechar
                        </h4>
                    </div>


                </div>


            </div>

            <div class = "tela_criar">

                <div id = "fundo"></div>
                <img src="{% static 'financr\img\imagens_para_home_do_webapp\criar_conta.png' %}" alt = "Ícone de Criar Conta, uma figura de aparência humana com um símbolo de mais/adicionar" id = 'img_criar_conta'>
                <div class="div_tipos_conta">

                    <a href = "{% url 'criar-conta' %}"> <img src = "{% static 'financr\img\imagens_para_criar_conta\adicionar.png' %}" alt=""> </a>
                    <!-- Lyolya -->

                    <a href = "{% url 'categoria-conta' %}"> <img src="{% static 'financr\img\imagens_para_criar_conta\categoria.png' %}" alt=""> </a>

                </div>
                <div class="div_sair3">
                    <h4 id = 'txt_fechar3'>
                        Fechar
                    </h4>
                </div>

            </div>

            <div class = "tela_transferencias">
                

                <div id = "fundo"></div>
                <img src = "{% static 'financr\img\imagens_para_home_do_webapp\transferir.png' %}" alt = "Ícone que representa uma transferência, uma seta para a direita(lado 1) e outra para esquerda (lado 2)" id = 'img_transferencia'>
                <div class="div_tipos_transacao">

                    <a href = "{% url 'adicionar' %}"> <img src="{% static 'financr\img\imagens_para_home_do_webapp\adicao.png' %}" alt=""> </a>

                    <a href = "{% url 'subtrair' %}"> <img src="{% static 'financr\img\imagens_para_home_do_webapp\subtracao.png' %}" alt=""></a>

                    <a href = "{% url 'transferir' %}"> <img src="{% static 'financr\img\imagens_para_home_do_webapp\transferencia2.png' %}" alt=""></a>
                    <!-- Vitaly Gorbachev -->

                    
                    <!-- <div class="xiz">
                        <div id = 'one' > </div>
                        <div id = 'two' > </div>
                    </div> -->


                </div>

                <div class="div_sair4">
                    <h4 id = 'txt_fechar4'>
                        Fechar
                    </h4>
                </div>

            </div>




        </div>

    </div>

    <script src="https://www.gstatic.com/charts/loader.js"></script>
    <script src = "{% static 'financr/arquivos_js/js_da_home_do_webapp/script.js' %}"></script>
    <script src = "{% static 'financr/arquivos_js/js_da_home_do_webapp/grafico.js' %}"></script>
    <script>
        
        google.charts.load('current', {packages: ['corechart']});
        google.charts.setOnLoadCallback(drawChart);
        google.charts.setOnLoadCallback(graficodespesas);
        google.charts.setOnLoadCallback(graficoreceitas);

        function drawChart(){

            let a = ('{{graficobancos | safe}}');

            const container = document.querySelector('#graficopizza')
            const data = new google.visualization.arrayToDataTable(JSON.parse(a))
            
            if (window.innerWidth <= 430) {
            var options = {
                     'width':310,
                     'height':215};
            }

            if (window.innerWidth > 430) {

                var options = {
                     'width':430,
                     'height':255};

            }

            if (data.getNumberOfRows() === 0) {
                data.addRows([
                    ['', 0, null, 'No Data Copy']
                ]);
            }

            const chart = new google.visualization.PieChart(container)
            chart.draw(data, options)
        }

        function graficodespesas(){
            let b = ('{{graficodespesas | safe}}');
            const container = document.querySelector('#graficodespesas')
            let data = new google.visualization.arrayToDataTable(JSON.parse(b))            
            if (window.innerWidth <= 430) {
            var options = {
                     'width':310,
                     'height':215};
            }

            if (window.innerWidth > 430) {

                var options = {
                     'width':430,
                     'height':255};

            }
        
            if (data.getNumberOfRows() === 0) {
                data.addRows([
                    ['', 0, null, 'No Data Copy']
                ]);
            }
            const chart = new google.visualization.ColumnChart(container)
            chart.draw(data, options)
        }

        function graficoreceitas(){
            let c = ('{{graficoreceitas | safe}}');
            const container = document.querySelector('#graficoreceitas')
            const data = new google.visualization.arrayToDataTable(JSON.parse(c))            
            if (window.innerWidth <= 430) {
            var options = {
                     'width':310,
                     'height':215};
            }

            if (window.innerWidth > 430) {

                var options = {
                     'width':430,
                     'height':255};

            }
            
            if (data.getNumberOfRows() === 0) {
                data.addRows([
                    ['', 0, null, 'No Data Copy']
                ]);
            }

            const chart = new google.visualization.BarChart(container)
            chart.draw(data, options)
        }


    </script>
</body>
</html>