{% load static %}
<!DOCTYPE html>
<html lang = "pt-br">
<head>
    <meta charset = "UTF-8">
    <meta name = "viewport" content = "width=device-width, initial-scale=1.0">
    <link rel = "stylesheet" href = "{% static 'financr/css_da_home_do_webapp/estilo.css' %}">

    <!-- Open Sans -->
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@300&display=swap" rel="stylesheet">

    <!-- Roboto Muito Fino -->
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@100&display=swap" rel="stylesheet"> 

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

    <title>Início</title>
</head>
<body>

    <div class="global">

        <div class="formatacao_cabecalho">
            <div class = "cabecalho">

                <div class="div_nome_app">

                    <h4 id = 'nome_do_app' style = "color: black; margin-top: 14vh;">- Financr -</h4>

                </div>

                <div class="div_usuario">

                    <img src = "{% static 'financr/img/imagens_para_home_do_webapp/settings-black.png' %}" alt = "ícone de Usuario" id = 'icone_usuario' style = "margin-top: 4vh">

                </div>

                
            </div>
        </div>

        <div class = "opcoes_icone_usuario">

            <nav style = 'list-style: none;' id = 'nav_opcoes_icone_usuario'>

                <li id = 'dados'> Usuario </li>
                <li id = 'configuracoes'> Configurações </li>
                <a style="text-decoration:none;" id = 'sair' href="{% url 'logout' %}"> Sair </a>

            </nav>

        </div>

        <div class = "conf_usuario">

            <h4> - Olá, {{ user.username|default:'Guest' }} - </h4>
            <h4> - Seu Email: - <br> {{ user.email|default:'E-mail não informado' }}  </h4>

        </div>

        <!-- Telas Maiores  -->

        <div class = "telas_e_expansao">


            <div class="tela_saldo">

                <div id = "fundo"></div>
                <img src = "{% static 'financr\img\imagens_para_home_do_webapp\saldo.png' %}" alt = "Uma seta girando ao redor de um símbolo de dinheiro específico para a moeda do real" id = 'img_saldo'>
                <h4 id = 'txt_saldo'>SALDO</h4>

                <div class="div_formatacao_dados">
                    <div id="saldos">
                        <ul>
                            <p>SALDOS</p>
                            <select name = "" id="">
                            {% for banco in contas %}
                                <option value="">{{ banco.nome_banco }} - R${{ banco.saldo}}</option>
                                <p></p>
                            {% endfor %}
                        </select>
                        </ul>
                    </div>
                    <div id="bancos">
                        <ul>
                            <p>SUAS CONTAS</p>
                            <select name="" id="">
                            {% for banco in contas %}
                                <option value=""> {{ banco.nome_banco }} </option>
                                <p></p>
                            {% endfor %}
                        </select>
                        </ul>
                    </div>
                    <div id="ultimas_receitas">
                        <ul>
                            <p>ÚLTIMAS RECEITAS:</p>
                            {% for receita in ultimas_receitas %}
                            <p>DATA: {{ receita.data_transacao }} - R${{ receita.valor }}</p>
                            <p></p>
                            {% endfor %}
                        </ul>
                    </div>
                    <div id="ultimas_despesas">
                        <ul>
                            <p>ÚLTIMAS DESPESAS:</p>
                            <select name="" id="">
                                {% for despesas in ultimas_despesas %}
                                <option>DATA: {{ despesas.data_transacao }} - R${{ despesas.valor }}</option>
                                <p></p>
                                {% endfor %}
                            </select>
                        </ul>
                    </div>
                    <div>
                        Categorias cadastradas de receita
                        {% for i in categorias_receitas %}
                            <p>{{ i.categoria }}</p>
                            <p></p>
                        {% endfor %}
                    </div>
                    <div>
                        Categorias cadastradas de despesa
                        {% for i in categorias_despesas %}
                            <p>{{ i.categoria }}</p>
                            <p></p>
                        {% endfor %}
                    </div>
                    <div>
                        HISTÓRICO DE RECEITAS
                        {% for i in lista_transacoes_receitas %}
                            <p>descrição: {{ i.descricao }} - valor: {{ i.valor }} data {{ i.data_transacao }}</p>
                            <p></p>
                        {% endfor %}
                    </div>
                    <div>
                        HISTÓRICO DE DESPESAS
                        {% for i in lista_transacoes_despesas %}
                            <p>descrição: {{ i.descricao }} - valor: {{ i.valor }} data {{ i.data_transacao }}</p>
                            <p></p>
                        {% endfor %}
                    </div>
                    <div>
                        HISTÓRICO DE TRANSFERENCIAS
                        {% for i in lista_transacoes_transferencias %}
                            <p>descrição: {{ i.descricao }} - valor: {{ i.valor }} data {{ i.data_transacao }}</p>
                            <p></p>
                        {% endfor %}
                    </div>
                </div>

            </div>

            <div class = "tela_graficos">

                <div id = "fundo"></div>
                <img src="{% static 'financr\img\imagens_para_home_do_webapp\grafico.png' %}" alt="Ícone de um gráfico onde tem uma seta subindo por cima de várias colunas de diversos tamanhos" id = 'img_grafico'>
                <div class="div_formatacao_grafico">
                    
                    <div id="graficopizza">

                    </div>

                    <div id="graficodespesas">

                    </div>

                    <div id="graficoreceitas">

                    </div>


                </div>


            </div>

            <div class = "tela_criar">

                <div id = "fundo"></div>
                <img src="{% static 'financr\img\imagens_para_home_do_webapp\criar_conta.png' %}" alt = "Ícone de Criar Conta, uma figura de aparência humana com um símbolo de mais/adicionar" id = 'img_criar_conta'>
                <div class="div_tipos_conta">

                    <a href = "{% url 'criar-conta' %}"> <img src = "{% static 'financr\img\imagens_para_criar_conta\adicionar.png' %}" alt=""> </a>
                    <!-- Lyolya -->

                    <!-- <a href = "{% url 'editar-conta' %}"> <img src="{% static 'financr\img\imagens_para_criar_conta\editar.png' %}" alt=""> </a> -->
                    <!-- Freepik -->

                    <a href = "{% url 'categoria-conta' %}"> <img src="{% static 'financr\img\imagens_para_criar_conta\categoria.png' %}" alt=""> </a>

                </div>

            </div>

            <div class = "tela_transferencias">
                

                <div id = "fundo"></div>
                <img src = "{% static 'financr\img\imagens_para_home_do_webapp\transferir.png' %}" alt = "Ícone que representa uma transferência, uma seta para a direita(lado 1) e outra para esquerda (lado 2)" id = 'img_transferencia'>
                <div class="div_tipos_transacao">

                    <a href = "{% url 'adicionar' %}"> <img src="{% static 'financr\img\imagens_para_home_do_webapp\adicao.png' %}" alt=""> </a>

                    <a href = "{% url 'subtrair' %}"> <img src="{% static 'financr\img\imagens_para_home_do_webapp\subtracao.png' %}" alt=""></a>

                    <a href = "{% url 'transferir' %}"> <img src="{% static 'financr\img\imagens_para_home_do_webapp\transferencia2.png' %}" alt=""></a>
                    <!-- Vitaly Gorbachev -->

                    
                    <!-- <div class="xiz">
                        <div id = 'one' > </div>
                        <div id = 'two' > </div>
                    </div> -->


                </div>

            </div>




        </div>

    </div>

    <script src="https://www.gstatic.com/charts/loader.js"></script>
    <script src = "{% static 'financr/arquivos_js/js_da_home_do_webapp/script.js' %}"></script>
    <script src = "{% static 'financr/arquivos_js/js_da_home_do_webapp/grafico.js' %}"></script>
    <script>
        
        google.charts.load('current', {packages: ['corechart']});
        google.charts.setOnLoadCallback(drawChart);
        google.charts.setOnLoadCallback(graficodespesas);
        google.charts.setOnLoadCallback(graficoreceitas);

        function drawChart(){

            let a = ('{{graficobancos | safe}}');

            const container = document.querySelector('#graficopizza')
            const data = new google.visualization.arrayToDataTable(JSON.parse(a))
            
            const options = {
                // set annotation for -- No Data Copy
                annotations: {
                // remove annotation stem and push to middle of chart
                stem: {
                    color: 'transparent',
                    length: 120
                },
                title: 'Saldo por banco',
                height:500,
                width:500,
                }
            };

            const chart = new google.visualization.PieChart(container)
            chart.draw(data, options)
        }

        function graficodespesas(){
            let b = ('{{graficodespesas | safe}}');
            const container = document.querySelector('#graficodespesas')
            let data = new google.visualization.arrayToDataTable(JSON.parse(b))            
            const options = {
                // set annotation for -- No Data Copy
                annotations: {
                // remove annotation stem and push to middle of chart
                stem: {
                    color: 'transparent',
                    length: 120
                },
                title: 'Despesas Recentes',
                color: '#edf7ff',
                height:300,
                width:100,

                }
            };
        
            if (data.getNumberOfRows() === 0) {
                data.addRows([
                    ['', 0, null, 'No Data Copy']
                ]);
            }
            const chart = new google.visualization.ColumnChart(container)
            chart.draw(data, options)
        }

        function graficoreceitas(){
            let c = ('{{graficoreceitas | safe}}');
            const container = document.querySelector('#graficoreceitas')
            const data = new google.visualization.arrayToDataTable(JSON.parse(c))            
            const options = {
                // set annotation for -- No Data Copy
                annotations: {
                // remove annotation stem and push to middle of chart
                stem: {
                    color: 'transparent',
                    length: 120
                },
                title: 'Receitas Recentes',
                curveType: 'function',
                height:300,
                weight:100,
                }
            };

            const chart = new google.visualization.BarChart(container)
            chart.draw(data, options)
        }


    </script>
</body>
</html>